;(function(c,e){var b=c.History,d=c.jQuery,a=c.document;if(!b.enabled){return false}d(function(){var q="#mac_main_container",h=d(q).filter(":first"),n=h.get(0),f=d("#mac-main-topbar"),p="active selected current",k=".active,.selected,.current",r="> li, > ul > li",m="statechangecomplete",i=d(c),l=d(a.body),g=b.getRootUrl(),j={duration:800,easing:"swing"};if(h.length===0){h=l}d.expr[":"].internal=function(y,u,x,s){var w=d(y),t=w.attr("href")||"",v;v=t.substring(0,g.length)===g||t.indexOf(":")===-1;return v};var o=function(s){return d.trim(s)};d.fn.ajaxify=function(){var s=d(this);s.find("a:internal:not(a#start, a.close, a.dropdown-toggle, .activity_feed_form_attach a, .no-ajaxy, .no_ajax_link, .thickbox, a.inlinePopup, .comment_mini_link_like a, .activity_like_holder a, a.dont-unbind, .mac-no-ajaxify-links a), a.mac-ajaxify, .mac-ajaxify-links a, a.ajax_link").click(function(u){var v=d(this),t=v.attr("href"),w=v.attr("title")||null;if(u.which==2||u.metaKey){return true}b.pushState(null,w,t);u.preventDefault();return false});return s};l.ajaxify();i.bind("statechange",function(){var t=b.getState(),u=t.url,s=u.replace(g,"");l.addClass("loading");h.animate({opacity:0},800);d.ajax({url:u,success:function(z,C,x){var v=d(o(z)),y=v.find(q).filter(":first"),B,A;A=y.html()||v.html();if(!A){a.location.href=u;return false}B=f.find(r);B.filter(k).removeClass(p);B=B.has('a[href^="'+s+'"],a[href^="/'+s+'"],a[href^="'+u+'"]');if(B.length){B.addClass(p)}h.stop(true,true);h.html(A).ajaxify().css("opacity",100).show();a.title=v.find(".document-title:first").text();try{a.getElementsByTagName("title")[0].innerHTML=a.title.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(w){}if(l.ScrollTo||false){l.ScrollTo(j)}l.removeClass("loading");i.trigger(m);if(typeof c._gaq!=="undefined"){c._gaq.push(["_trackPageview",s])}if(typeof c.reinvigorate!=="undefined"&&typeof c.reinvigorate.ajax_track!=="undefined"){reinvigorate.ajax_track(u)}},error:function(v,x,w){a.location.href=u;return false}})})})})(window);
